/* Pop-Pop.css */

/* TODO
	- Sizes attribute (small / medium / large)
	- Line breaks
	- Background color attribute
	- Text color attribute
	- Border-radius attribute (?)
	- Box shadow attribute (?)
	- z-index variable
	
	- DOCS
*/

/* Defaults & variables */
:root {
  --pop-text-color: #efefef;
	--pop-bg-color: #252525;
	--pop-min-width: 0px;
  --pop-shadow-color: #252525;
	--pop-transition-delay: 0.2s;
	--pop-animation-speed: 0.1s;
  --pop-border-radius: 5px;
  --pop-padding: 8px;
	--pop-offset: 15px;
	--pop-font-size: 12px;
	--pop-arrow-size: 5px;
}

/* Mixins */
@mixin pop-pop-before {
	opacity: 1;
	transition: opacity var(--pop-animation-speed) linear;
	transition-delay: var(--pop-transition-delay);
	position: absolute;
	border-style: solid;
	border-width: var(--pop-arrow-size);
	z-index: 1000;
}

@mixin pop-pop-after {
	opacity: 1;
	content: attr(aria-label);
	min-width: var(--pop-min-width);
	text-align: center;
	transition: opacity var(--pop-animation-speed) linear;
	transition-delay: var(--pop-transition-delay);
	position: absolute;
	color: var(--pop-text-color);
	border-radius: var(--pop-border-radius);
	box-shadow: 0px 0px 5px var(--pop-shadow-color);
	background-color: var(--pop-bg-color);
	padding: var(--pop-padding);
	font-size: var(--pop-font-size);
	line-height: var(--pop-font-size);
	white-space: nowrap;
	z-index: 999;
}

@mixin transition-delay {
	&[data-pop-delay="short"]:hover::after, &[data-pop-delay="short"]:hover::before {
		transition-delay: 0.5s;
	}
	&[data-pop-delay="medium"]:hover::after, &[data-pop-delay="medium"]:hover::before {
		transition-delay: 1.5s;
	}
	&[data-pop-delay="long"]:hover::after, &[data-pop-delay="long"]:hover::before {
		transition-delay: 3s;
	}
}

/* SCSS */
[data-pop]:not([data-pop="bottom"]):not([data-pop="right"]):not([data-pop="left"])[aria-label], [data-pop="top"][aria-label] {
	position: relative;
	&::after {
		opacity: 0;
		content: "";
		bottom: calc(100% + var(--pop-offset));
		left: 50%;
		transform: translateX(-50%);
	}
	&[data-pop-arrow]::before {
		opacity: 0;
		content: "";
		bottom: calc(100% + var(--pop-offset) - (2*var(--pop-arrow-size)));
		left: 50%;
		transform: translateX(-50%);
		border-color: var(--pop-bg-color) transparent transparent transparent;
	}
	&[data-pop-arrow]:hover::before, &[data-pop-arrow]:focus::before, &[data-pop-show]::before {
		@include pop-pop-before();
	}
	&:hover::after, &:focus::after, &[data-pop-show]::after {
		@include pop-pop-after();
	}
	@include transition-delay();
}

[data-pop="bottom"][aria-label] {
	position: relative;
	&::after {
		opacity: 0;
		content: "";
		top: calc(100% + var(--pop-offset));
		left: 50%;
		transform: translateX(-50%);
	}
	&[data-pop-arrow]::before {
		opacity: 0;
		content: "";
		top: calc(100% + var(--pop-offset) - (2*var(--pop-arrow-size)));
		left: 50%;
		transform: translateX(-50%);
		border-color: transparent transparent var(--pop-bg-color) transparent;
	}
	&[data-pop-arrow]:hover::before, &[data-pop-arrow]:focus::before, &[data-pop-show]::before {
		@include pop-pop-before();
	}
	&:hover::after, &:focus::after, &[data-pop-show]::after {
		@include pop-pop-after();
	}
	@include transition-delay();
}

[data-pop="left"][aria-label] {
	position: relative;
	&::after {
		opacity: 0;
		content: "";
		right: calc(100% + var(--pop-offset));
		top: 50%;
		transform: translateY(-50%);
	}
	&[data-pop-arrow]::before {
		opacity: 0;
		content: "";
		right: calc(100% + var(--pop-offset) - (2*var(--pop-arrow-size)));
		top: 50%;
		transform: translateY(-50%);
		border-color: transparent transparent transparent var(--pop-bg-color);
	}
	&[data-pop-arrow]:hover::before, &[data-pop-arrow]:focus::before, &[data-pop-show]::before {
		@include pop-pop-before();
	}
	&:hover::after, &:focus::after, &[data-pop-show]::after {
		@include pop-pop-after();
	}
	@include transition-delay();
}

[data-pop="right"][aria-label] {
	position: relative;
	&::after {
		opacity: 0;
		content: "";
		left: calc(100% + var(--pop-offset));
		top: 50%;
		transform: translateY(-50%);
	}
	&[data-pop-arrow]::before {
		opacity: 0;
		content: "";
		left: calc(100% + var(--pop-offset) - (2*var(--pop-arrow-size)));
		top: 50%;
		transform: translateY(-50%);
		border-color: transparent var(--pop-bg-color) transparent transparent;
	}
	&[data-pop-arrow]:hover::before, &[data-pop-arrow]:focus::before, &[data-pop-show]::before {
		@include pop-pop-before();
	}
	&:hover::after, &:focus::after, &[data-pop-show]::after {
		@include pop-pop-after();
	}
	@include transition-delay();
}